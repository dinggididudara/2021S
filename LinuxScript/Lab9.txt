#! /bash/shell

#Lab9
#Soomin 040899389
#CST8102_302
#mycalc.sh
#30-July-2021
#description: fuctions that operate add and subtract

function add() {  #function for addition 
        add=`expr $a + $c`
        echo "The Sum of $a plus $c equals $add"
}

function substract() {   #function for subtraction
        sub=`expr $a - $c`
        echo "The Subtraction of $a minus $c equlas $sub"
}


menu1=n   #initialize for until-loop

until [[ $menu1 == 'x' ]] || [[ $menu1 == 'X' ]] || [[ $menu2 == 'x' ]] || [[ $menu2 == 'X' ]] || [[ $menu3 == 'x' ]] || [[ $menu3 == 'X' ]]
do
clear
echo -e "C) Calculation \nX) Exit"  #menu 1
read menu1


case $menu1 in
    'c'|'C')
        clear
        echo -n "Please enter an integer number or X to exit: "    #menu 2
        read a b c d
        if [[ -n "$a" ]] && [[ -n "$b" ]] && [[ -z "$d" ]]    #if 4th param is null (=maximum 3 parameters)
         then

        case $b in    #if 2nd parameter is + or -
          '+')
             menu3='+' ;;    #if 2nd parameter is +, set menu3 variable to +
          '-')
             menu3='-' ;;    #if 2nd parameter is -, set menu3 variable to -
            *)
             echo -e "+) Add \n-) Substract \nX) Exit" #menu 3
             read menu3
             c=$b ;;     #if user only input two params then only a and b is not null. Then, set c as user input, so that a and c can go into function.
        esac

       if [[ $menu3 == '+' ]]
        then
             clear
             add $a $c
             sleep 3; clear
             unset a b c
             continue
        elif [[ $menu3 == '-' ]]
        then
             clear
             substract $a $c
             sleep 3; clear
             unset a b c
             continue
         elif [[ $menu3 == 'x' ]] || [[ $menu3 == 'X' ]]
         then
             echo "Exit now"
             exit
         else
             echo "Error. Please try again!"
             continue
         fi
       fi ;;   #menu 2 end

    'x'|'X')    #if menu1 is x or X
        echo "Exit now"
        exit ;;

    *)    #if other inputs (invalid)
        echo "Invalid input. Please try again!"
        continue ;;

 esac   #menu 1 end -> go back to the main menu

done   #while-loop end  